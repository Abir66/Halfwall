CREATE OR REPLACE PROCEDURE "UPDATE_USER" (NEW_USER_ID IN NUMBER, NEW_STUDENT_ID IN NUMBER, NEW_NAME IN VARCHAR2, NEW_EMAIL IN VARCHAR2, NEW_PASSWORD IN VARCHAR2, NEW_DATE_OF_BIRTH IN VARCHAR2, NEW_HALL IN VARCHAR2, NEW_HALL_ATTACHMENT IN CHAR, NEW_STREET IN VARCHAR2, NEW_CITY IN VARCHAR2, NEW_POSTCODE IN NUMBER, RESULT OUT VARCHAR2)
AS
BEGIN
	UPDATE USERS
    SET
		STUDENT_ID = NEW_STUDENT_ID,
        NAME = UPPER(NEW_NAME),
		EMAIL = LOWER(NEW_EMAIL),
		PASSWORD = NEW_PASSWORD,
		DATE_OF_BIRTH = TO_DATE(NEW_DATE_OF_BIRTH,'YYYY-MM-DD'),
        HALL = UPPER(NEW_HALL),
		HALL_ATTACHMENT = UPPER(NEW_HALL_ATTACHMENT),
		STREET = UPPER(NEW_STREET),
		CITY = UPPER(NEW_CITY),
		POSTCODE = NEW_POSTCODE
        
	WHERE USER_ID = NEW_USER_ID;		
		RESULT := 'success';

	EXCEPTION
    WHEN DUP_VAL_ON_INDEX THEN
        RESULT := 'Student ID or email already exists';
    WHEN OTHERS THEN
        RESULT := 'Something went wrong';
END;