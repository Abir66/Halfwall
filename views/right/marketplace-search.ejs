
<div class="right-box">
    <form action = "/marketplace" method = "get" >
        <div class="heading" style="display: flex; justify-content: space-between;"> 
            <h3 style="font-size: 1.1rem;">Search & filter</h3>
            <% if (data.searched) { %>
                <a href="/marketplace"><h5 class="text-muted" style="font-size: 1rem;">clear</h5></a>
            <% } %>            
        </div>


        <div class="search-bar">
            <i class="fa-solid fa-magnifying-glass" style="display: inblock;"></i>
            <input type="search" name = "marketplace_search_term" placeholder="Search in this profile" <% if (data.search_term) { %> value = <%= data.search_term %> <% } %> >
        </div>

        <div class="subsection">
            <div id="marketplace_catagory" class="dropdown-check-list" tabindex="100" style="position: relative ;">
                <div class="dropdown-check-list-anchor"><div>Catagory</div><div><i class="fa-solid fa-caret-down"></i></div></div>
                <ul class="dropdown-check-list-items" style="display: none ; position: absolute; background-color: white;">
                  <li><input class="form-check-input" type="checkbox" name="marketplace_catagory" value="Clothings" id="marketplace_catagory_Clothings" <% if (data.search_filter && data.search_filter.includes("Clothings")) { %> checked <% } %>> Clothings</li>
                  <li><input class="form-check-input" type="checkbox" name="marketplace_catagory" value="Bicycle" id="marketplace_catagory_Bicycle" <% if (data.search_filter && data.search_filter.includes("Bicycle")) { %> checked <% } %>> Bicycle</li>
                  <li><input class="form-check-input" type="checkbox" name="marketplace_catagory" value="Smartphones and Tabs" id="marketplace_catagory_Smartphones_and_Tabs" <% if (data.search_filter && data.search_filter.includes("Smartphones and Tabs")) { %> checked <% } %>> Smartphones and Tabs</li>
                  <li><input class="form-check-input" type="checkbox" name="marketplace_catagory" value="Computer and accessories" id="marketplace_catagory_Computer_and_accessories" <% if (data.search_filter && data.search_filter.includes("Computer and accessories")) { %> checked <% } %>> Computer and accessories</li>
                  <li><input class="form-check-input" type="checkbox" name="marketplace_catagory" value="Electronics" id="marketplace_catagory_Electronics" <% if (data.search_filter && data.search_filter.includes("Electronics")) { %> checked <% } %>> Electronics</li>
                  <li><input class="form-check-input" type="checkbox" name="marketplace_catagory" value="Others" id="marketplace_catagory_Others" <% if (data.search_filter && data.search_filter.includes("Others")) { %> checked <% } %>> Others</li>
                </ul>
            </div>
        
            <script type="text/javascript">
                var checkList = document.getElementById('marketplace_catagory');
                checkList.getElementsByClassName('dropdown-check-list-anchor')[0].onclick = function(evt) {
                    if (checkList.getElementsByClassName('dropdown-check-list-items')[0].style.display == 'none') checkList.getElementsByClassName('dropdown-check-list-items')[0].style.display = 'block';
                    else checkList.getElementsByClassName('dropdown-check-list-items')[0].style.display = 'none';
                }
            </script>

        </div>

        <div class="subsection">
            <h4><i class="fa-solid fa-filter"></i>Price</h4>
            <div class="number-range">
                <input type="number" name = "marketplace_search_price_min" placeholder="From" <% if (data.price_min) { %> value = <%= data.price_min %> <% } %> >
                <input type="number" name = "marketplace_search_price_max" placeholder="To" <% if (data.price_max) { %> value = <%= data.price_max %> <% } %> >
            </div> 
        </div>

        <div class="subsection">
            <h4><i class="fa-solid fa-filter"></i>Condition</h4>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="marketplace_condition" value="New" id="marketplace_condition_New" <% if (data.condidtion === "New") { %> checked <% } %>>
                <label class="form-check-label" for="marketplace_condition_New">New</label>
            </div>

            <div class="form-check">
                <input class="form-check-input" type="radio" name="marketplace_condition" value="Used" id="marketplace_condition_Used" <% if (data.condidtion === "Used") { %> checked <% } %>>
                <label class="form-check-label" for="marketplace_condition_Used">Used</label>
            </div>  
        </div>

        <div class="subsection">
            <h4><i class="fa-solid fa-filter"></i>Available</h4>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="marketplace_available" value="Yes" id="marketplace_available_Yes" <% if (data.available === "Yes") { %> checked <% } %>>
                <label class="form-check-label" for="marketplace_condition_Yes">Yes</label>
            </div>

            <div class="form-check">
                <input class="form-check-input" type="radio" name="marketplace_available" value="No" id="marketplace_available_No" <% if (data.available === "No") { %> checked <% } %>>
                <label class="form-check-label" for="marketplace_condition_Yes">No</label>
            </div>

        </div>


        <div class="subsection">
            <h4><i class="fa-solid fa-filter"></i>Sort By</h4>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="marketplace_sort_by" value="time" id="marketplace_search_sortByTime" <% if (data.sort_by === "time") { %> checked <% } %>>
                <label class="form-check-label" for="marketplace_search_sortByTime">
                  Time
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="marketplace_sort_by" value="popularity" id="marketplace_search_popularity" <% if (data.sort_by === "popularity") { %> checked <% } %>>
                <label class="form-check-label" for="marketplace_search_popularity">
                  Popularity
                </label>
              </div>
        </div>
        <button type="submit" class="btn btn-primary" style="width:100% ; margin-top: 1rem;">Search</button>

    </form>
</div>