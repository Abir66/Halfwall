<style>
    .modal-container-followReq{
        display: flex;
        align-items: center;
        justify-content: center;
        position: fixed;
        top: 0;
        left:0;
        width:100%;
        height: 100%;
        opacity: 0;
        pointer-events: none;
        transition: all .3s ease-in-out;
        
        background-color: rgba(0,0,0,0.3);
        z-index: 1000;
    }
    .modal-followReq{
        position: relative;
        background-color: #fff;
        width: 600px;
        border-radius: 10px;
        max-width: 80%;
        box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        padding: 30px 50px;
        text-align: center;
    }
    .modal-followReq h1{
        margin: 0;
    }
    .modal-followReq p{
        opacity: 0.7;
    }
    .close-modal-followReq{
        background-color: #47a386;
        border-radius: 5px;
        color: #fff;
        padding: 10px 25px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        font-size: 14px;
        cursor: pointer;
    }
    .modal-followReq-active{
        opacity: 1;
        pointer-events: auto;
    }
    .followRequest-list-thumbnail{
        height: 50px;
        width: 50px;
        border-radius: 25px;
    }
    .followReq-Items{
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 15px 0;
    }
    .followRequestsList{
        border: 1px solid #000;
        border-radius: 5px;
        height: 400px;
        overflow: auto;
        padding: 15px;
    }
    .followRequest-list-userName{
        margin-right: 1.5em;
        font-size: 1.2em;
    }
    .stopFuntionality{
        pointer-events: none;
        position: fixed;
        overflow-y: scroll;
        width: 100%;
    }
    .followReq-Items{
        overflow: auto;
    }


</style>
<!-- Ei pura div er upor click korle modal asha lagbe -->

<!-- remove anchor tag -->
<!-- <a href="/follow/getFollowRequests"> -->
<button id="showFollowRequestModal">Click Me</button>
<div class="right-box follow-requests-box">
    <button id="hello">hello</button>
    <h3 style="font-size: 1.2rem;">Follow Requests : <%= currentUser.request_count %>  </h3>
    <p>See who have requested to follow you</p>
</div>
<!-- Here is the modal part-->
<div class="modal-container-followReq" id="modal-container-followReq">
    <div class="modal-followReq modal-followReq">
        <div class="followRequestsList" id="followRequestsList">
            
           
        </div>
        <button id="close-modal-followReq">
            Close Me
        </button>
    </div>

</div>


<script>
    const followRequestButton = document.getElementById('showFollowRequestModal');
    const modal_container_followReq = document.getElementById('modal-container-followReq');
    const close_modal_followReq = document.getElementById('close-modal-followReq');
    const followRequestsList = document.getElementById('followRequestsList');
    function acceptFollowRequest(user_id){
        console.log("----------inside follow req .ejs script-----------------");
        console.log(user_id);
        let data = {
            user_id: user_id
        }
        axios.post("/follow/acceptFollowRequest",data)
        .then((req)=>{
            console.log("done");
        })

    }
    followRequestButton.addEventListener('click',()=>{
        document.body.classList.add("stopFuntionality");
        let data = axios.get("/follow/getFollowRequests")
        .then((req)=>{
            for(let i=0;i<req.data.length;i++){
                let list_element = "";
                let user_name = req.data[i].NAME;
                let user_id = req.data[i].USER_ID;
                let onclickDataAccept = "onclick=\"acceptFollowRequest("+user_id+")\"";
                let onclickDataRemove = "onclick=\"removeFollowRequest("+user_id+")\"";
                list_element += "<div class=\"followReq-Items\">";
                list_element += "<img src=\"/images/pfp.jpg\" class=\"followRequest-list-thumbnail\">";
                list_element += "<a href=\""+"/user/user_id="+user_id+"\" class=\"followRequest-list-userName\">"+user_name+"</a>";
                list_element += "<button class=\"followRequest-list-accept btn-success btn btn-lg\"  "+onclickDataAccept+">Accept</button>";                    
                list_element += "<button class=\"followRequest-list-remove btn-danger btn btn-sm \" "+onclickDataRemove+">Remove</button>";                
                list_element += "</div>";
                followRequestsList.innerHTML += list_element;
                
                // let accepting_request = document.getElementById(individual_class_accept);
                // let removing_request = document.getElementById(individual_class_remove);

                // accepting_request.addEventListener('click',()=>{
                //     console.log("accepting "+user_name);
                // })
                // removing_request.addEventListener('click',()=>{
                //     console.log("removing "+user_name);
                // })

            }
        })
        modal_container_followReq.classList.add('modal-followReq-active');
    });
    close_modal_followReq.addEventListener('click',()=>{
        modal_container_followReq.classList.remove('modal-followReq-active');
        document.body.classList.remove("stopFuntionality");
        
    })
    
    
</script>


<!--    
The route of getting the follow requests is /follow/getFollowRequests should be a GET requests (remove the anchor tag from the above code) 
The format of response is {
    USER_ID,
    TIME_STAMP,
    NAME,
    PROFILE_PIC [set to null for now. use a hardcoded image in frontend]
}

Use axios to get the follow requests from the server and display them in the modal 
To both accept and remove
the data of axios will only contain USER_ID : the user id of the user who has requested to follow you
see profile.ejs

The route of remove is /follow/removeFollowOFUser/
the route of accept is /follow/acceptFollow/

No need to reload window.  update followrequestcount and following count after remove and accept (get element by id)
set some id to the tags if needed. (****WITH MEANINGFUL NON-COLIDING NAME***)
(is success +- 1)


IN the modal, when clicked on user's name or profile pic, it should redirect to the user's profile page.
(newsfeed e post e click korle jeirokom hoy)

After removing or accepting, the modal should be the remove and follow button should be hidden.

-->
