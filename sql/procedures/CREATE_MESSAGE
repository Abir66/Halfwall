CREATE OR REPLACE PROCEDURE "CREATE_MESSAGE" (NEW_CHAT_ID IN NUMBER,NEW_USER_ID IN NUMBER, NEW_TEXT IN VARCHAR2, RESULT OUT NUMBER)
AS
NEW_MESSAGE_ID NUMBER;
BEGIN
	NEW_MESSAGE_ID := MESSAGE_SEQ.NEXTVAL;
	INSERT INTO MESSAGES (MESSAGE_ID,CONVERSATION_ID,USER_ID,TEXT,TIMESTAMP)
	VALUES( NEW_MESSAGE_ID,NEW_CHAT_ID,NEW_USER_ID,NEW_TEXT,CURRENT_TIMESTAMP);
	
	RESULT := NEW_MESSAGE_ID;
	
	EXCEPTION
		WHEN OTHERS THEN
			RESULT := -1;
	
END;