CREATE OR REPLACE PROCEDURE "CREATE_USER" (NEW_STUDENT_ID IN NUMBER, NEW_NAME IN VARCHAR2, NEW_EMAIL IN VARCHAR2, NEW_PASSWORD IN VARCHAR2, NEW_DEPARTMENT IN VARCHAR2, NEW_DATE_OF_BIRTH IN DATE, NEW_HALL IN VARCHAR2, NEW_HALL_ATTACHMENT IN CHAR, NEW_BATCH IN NUMBER, NEW_PROFILE_PIC IN VARCHAR2, NEW_STREET IN VARCHAR2, NEW_CITY IN VARCHAR2, NEW_POSTCODE IN NUMBER, RESULT OUT VARCHAR2)
AS

NEW_USER_ID NUMBER;
	
BEGIN
	NEW_USER_ID := USER_SEQ.NEXTVAL;
	INSERT INTO USERS
	VALUES  (NEW_USER_ID, NEW_STUDENT_ID, UPPER(NEW_NAME), LOWER(NEW_EMAIL), NEW_PASSWORD, UPPER(NEW_DEPARTMENT), NEW_DATE_OF_BIRTH, UPPER(NEW_HALL), UPPER(NEW_HALL_ATTACHMENT), NEW_BATCH, NEW_PROFILE_PIC, UPPER(NEW_STREET), UPPER(NEW_CITY), NEW_POSTCODE );

	RESULT := NEW_USER_ID;

	EXCEPTION
    WHEN DUP_VAL_ON_INDEX THEN
        RESULT := 'Student ID or email already exists';
    WHEN OTHERS THEN
        RESULT := 'Something went wrong';
END;