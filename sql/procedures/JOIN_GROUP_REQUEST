CREATE OR REPLACE PROCEDURE "JOIN_GROUP_REQUEST" (Q_GROUP_ID IN NUMBER, Q_USER_ID IN NUMBER, RESULT OUT VARCHAR2)
AS
	
BEGIN
	
	IF IS_GROUP_MEMBER(Q_GROUP_ID, Q_USER_ID) = 1 THEN
		RESULT := 'ALREADY JOINED';
	ELSE
		INSERT INTO GROUP_PENDING(GROUP_ID, USER_ID, TIMESTAMP)
		VALUES(Q_GROUP_ID, Q_USER_ID, CURRENT_TIMESTAMP);
	END IF;

EXCEPTION
    WHEN OTHERS THEN
        RESULT := 'Something went wrong';
END;